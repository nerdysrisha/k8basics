apiVersion: networking.istio.io/v1alpha3
kind: VirtualService
metadata:
  name: intg-services-virtualservice
  namespace: istio-system  # Centralized with gateway in same namespace
spec:
  hosts:
  - "*"                    # Applies to all hosts
  gateways:
  - intg-services-gateway  # References gateway in same namespace (no prefix needed)
  http:
  - match:
    - uri:
        prefix: /ing1     # Routes requests with /ing1 path prefix
    route:
    - destination:
        host: ing1-service.integrations.svc.cluster.local  # Target service in integrations namespace
        port:
          number: 8081    # Target port of the service
  - match:
    - uri:
        prefix: /ing2     # Routes requests with /ing2 path prefix  
    route:
    - destination:
        host: ing2-service.integrations.svc.cluster.local  # Target service in integrations namespace
        port:
          number: 8082    # Target port of the service